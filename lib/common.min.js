!function(a){var b=a.ajax;a.ajax=function(c){var d=c.error;c.error=function(a,b,e){401===a.status?_.go("/login"):d.call(c.context,a,b,e)},b.call(a,c)},window._=window._||{},_.$body=a(document.body),_.go=function(a){void 0===a&&(a=-1),"number"==typeof a?history.go(a):location.href=a},_.search=function(a){location.href="/search?wd="+a},_.Overlay=function(){var b=0,c=1,d=2,e=function(c){c=a.extend({content:"",hasMask:!0,destroyOnMaskClicked:!1},c);var e=this;this._overlay=a('<div class="overlay-content"></div>');var f=a('<div class="overlay-content-container"></div>');this._container=a('<div class="overlay-container beforeFadeIn"></div>'),this._container.on("webkitTransitionEnd.overlay",function(){e._status===d&&(e._status=b,e._container.hide().removeClass("afterFadeOut").addClass("beforeFadeIn"))}),c.hasMask?(this._container.on("touchmove",function(a){a.preventDefault()}),c.destroyOnMaskClicked&&this._container.on("touchend",_.bind(function(b){a(b.target).is(".overlay-container")&&this.destroy()},this))):this._container.addClass("unmasked"),this.content(c.content),this._container.append(f.append(this._overlay)).appendTo(document.body),this._status=b,this.show()};return e.prototype={show:function(){return this._status=c,this._container.show().removeClass("beforeFadeIn"),this},hide:function(){return this._status===c?(this._status=d,this._container.addClass("afterFadeOut")):this._status=b,this},destroy:function(){this.off(),this._status!==c?this._container.remove():(this._container.off("webkitTransitionEnd.overlay").on("webkitTransitionEnd",_.bind(function(){this._container.remove()},this)),this.hide())},on:function(){return a.fn.on.apply(this._overlay,arguments),this},off:function(){return a.fn.off.apply(this._overlay,arguments),this},content:function(a){return null===a?this._overlay.children():(this._overlay.html(a),this)}},e}(),_.$navbar=a("#navbar"),_.addCart=function(b,c){a.post("?foodId="+b,function(a){var b=_.$navbar.find(".cart-num");b.html(+b.html()+1).cssAnimateOnce("pulse fast"),c&&c()})},_.touchEnd="touchend MSPointerUp pointerup",_.cssAnimateEnd="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",a.fn.cssAnimateOnce=function(b,c){return this.each(function(){a(this).addClass("animated "+b).one(_.cssAnimateEnd,function(){a(this).removeClass("animated "+b),c&&c.call(this)})}),this},a.fn.tipsBox=function(b,c){return c=c||"zoomOutUp",this.each(function(){var d=a(this),e=d.offset(),f=d.width();a(b).appendTo(_.$body).css({position:"absolute",top:e.top-15,left:e.left+f/2}).cssAnimateOnce(c,function(){a(this).remove()})}),this}}(Zepto),$(document).ready(function(){$.fn.unslider&&$(".banner.banner-default").each(function(){var a=$(this);a.unslider({speed:500,delay:3e3,dots:!a.hasClass("no-dot"),swipe:!a.hasClass("no-swipe"),fluid:!1})});var a=$("#header"),b=a.find(".search-input"),c=b.find("input"),d=a.find(".logo");a.find(".search").on("click",function(){b.hasClass("hidden")?(b.removeClass("hidden"),d.hide(),c.focus()):(b.addClass("hidden"),d.show())}),c.on("keyup",function(a){13===a.keyCode&&_.search(this.value)}),a.find(".message").on(_.touchEnd,function(){}),_.$body.on(_.touchEnd,".btn-add-cart",function(){var a=$(this);_.addCart(a.data("id"),function(){a.tipsBox('<span class="tipsNum col-red fz-14 bold">+1</span>')})})});